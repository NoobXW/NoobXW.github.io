{"title":"Kali渗透测试--被动信息搜集","uid":"ef9aad89feb14bc71db83dcf1c572a1d","slug":"Kali渗透测试-被动信息搜集【DNS篇】","date":"2022-12-05T02:18:26.000Z","updated":"2022-12-17T15:45:50.987Z","comments":true,"path":"api/articles/Kali渗透测试-被动信息搜集【DNS篇】.json","keywords":null,"cover":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><h2 id=\"公开渠道搜集\"><a href=\"#公开渠道搜集\" class=\"headerlink\" title=\"公开渠道搜集\"></a>公开渠道搜集</h2><p>被动信息搜集完全基于公开渠道的信息获取，这些信息都是在公开渠道被公开过；被动信息搜集就是通过公开渠道去搜集目标公司以及系统相关的信息，不会与目标系统产生直接交互访问，搜索渠道和手段都是基于搜索引擎，媒体网站等。</p>\n<p>官方信息搜集文章：</p>\n<p>美国军方：</p>\n<p><a href=\"http://www.fas.org/irp/doddir/army/atp2-22-9.pdf\">http://www.fas.org/irp/doddir/army/atp2-22-9.pdf</a></p>\n<p>北大西洋公约组织：<br><a href=\"http://informaition-retrieval.info/docs/BATO-OSINT.html\">http://informaition-retrieval.info/docs/BATO-OSINT.html</a></p>\n<h2 id=\"信息搜集内容\"><a href=\"#信息搜集内容\" class=\"headerlink\" title=\"信息搜集内容\"></a>信息搜集内容</h2><ul>\n<li><p>IP地址段</p>\n</li>\n<li><p>域名信息</p>\n</li>\n<li><p>邮件地址</p>\n<ul>\n<li>社工进行攻击探测</li>\n</ul>\n</li>\n<li><p>文档图片数据</p>\n<ul>\n<li>获取企业内部的数据</li>\n<li>社工</li>\n</ul>\n</li>\n<li><p>公司地址</p>\n<ul>\n<li>对应无线网络</li>\n<li>社工</li>\n</ul>\n</li>\n<li><p>公司组织架构</p>\n<ul>\n<li>不同部门展开不同的社工方式</li>\n</ul>\n</li>\n<li><p>联系电话&#x2F;传真号码</p>\n</li>\n<li><p>人员姓名&#x2F;职务</p>\n</li>\n<li><p>目标系统使用的技术架构</p>\n<ul>\n<li>通过搜索引擎探测（发现一部分）</li>\n</ul>\n</li>\n<li><p>公开的商业信息</p>\n</li>\n</ul>\n<h2 id=\"信息用途\"><a href=\"#信息用途\" class=\"headerlink\" title=\"信息用途\"></a>信息用途</h2><ul>\n<li>用信息描述目标<ul>\n<li>通过这些信息重构这家公司，怎么样运作</li>\n</ul>\n</li>\n<li>发现<ul>\n<li>发现具体主机系统，服务</li>\n</ul>\n</li>\n<li>社会工程学攻击</li>\n<li>物理缺口<ul>\n<li>物理表攻击</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"信息搜集—DNS\"><a href=\"#信息搜集—DNS\" class=\"headerlink\" title=\"信息搜集—DNS\"></a>信息搜集—DNS</h2><h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>通常来做渗透测试项目时，从客户源只会得到一个DNS域名，后续所有的信息都需要自己进一步信息搜集。</p>\n<ul>\n<li><p>域名解析成IP地址</p>\n<ul>\n<li><p>域名与FQDN的区别</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">域名：sina,com\nFQDN(完全限定域名)：www.sina.com<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n\n</li>\n<li><p>域名记录：A、C name、NS、MX、PTR</p>\n</li>\n<li><p>A：主机记录；C name：别名记录；NS：域名服务器地址记录；MX：邮件交换记录；PTR：IP地址解析域名</p>\n<ul>\n<li>下图为DNS左边为递归查询流程，右边为迭代查询流程</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233437712.png\" alt=\"image-20221217233437712\"></p>\n<h3 id=\"DNS信息搜集—NSLOOKUP\"><a href=\"#DNS信息搜集—NSLOOKUP\" class=\"headerlink\" title=\"DNS信息搜集—NSLOOKUP\"></a>DNS信息搜集—NSLOOKUP</h3><p>type类型参数：a，ns，server，mx，ptr，any，spf</p>\n<p>以<a href=\"http://www.sina.com为例：\">www.sina.com为例：</a></p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233523044.png\" alt=\"image-20221217233523044\"></p>\n<p>mx查询邮件服务器记录：</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233537104.png\" alt=\"image-20221217233537104\"></p>\n<p>ns域名服务器地址：</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233549531.png\" alt=\"image-20221217233549531\"></p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233613660.png\" alt=\"image-20221217233613660\"></p>\n<p>any记录，全部查询出来：</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233628653.png\" alt=\"image-20221217233628653\"></p>\n<p>（<strong>spf记录将ip地址反向解析为域名，用来反垃圾邮件设置</strong>）</p>\n<h3 id=\"DNS信息搜集—DIG\"><a href=\"#DNS信息搜集—DIG\" class=\"headerlink\" title=\"DNS信息搜集—DIG\"></a>DNS信息搜集—DIG</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>多指定几个域名服务器进行查询</p></blockquote>\n<ul>\n<li><p>指定域名服务器查询：</p>\n<ul>\n<li>dig sina.com any @8.8.8.8</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233745182.png\" alt=\"image-20221217233745182\"></p>\n<ul>\n<li><p>dig +noall mail.163.com any</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>参数noall表示什么结果都不输出</p></blockquote>\n</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233757164.png\" alt=\"image-20221217233757164\"></p>\n<ul>\n<li><p>dig +noall +answer mail.163.com any</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>不输出回答信息</p></blockquote>\n</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233807857.png\" alt=\"image-20221217233807857\"></p>\n<ul>\n<li><p>dig +noall +answer -x 8.8.8.8</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>-x 参数 反向查询PTR</p></blockquote>\n</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233819899.png\" alt=\"image-20221217233819899\"></p>\n</li>\n<li><p>利用dig查询DNS服务器BIND信息</p>\n<ul>\n<li><p>dig +noall +answer txt chaos VERSION.BIND @ns3.dnsv4.com</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>查询ns3.dnsv4.com服务器BIND版本信息，BIND记录类型是txt，类级别是chaos类</p></blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233907385.png\" alt=\"image-20221217233907385\"></p>\n<p>查询到的版本信息如图。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>可以到BIND官网查询是否是最新的版本，若不是最新版本，查看release描述文件查看最新版本的修复了那些漏洞，进行漏洞利用。</p></blockquote>\n<ul>\n<li><p>有些DNS的BIND记录查询不到</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233918331.png\" alt=\"image-20221217233918331\"></p>\n</li>\n<li><p>dig追踪查询</p>\n<ul>\n<li><code>dig +trace www.sina.com</code></li>\n</ul>\n<p>查询结果如图，进行的是迭代查询，先去访问了根域，拿到.com域名服务器地址：</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233932217.png\" alt=\"image-20221217233932217\"></p>\n<p>之后，再从.com域名服务器中随机挑选一个IP地址192.5.5.241在查询sina.com域的NS记录，之后再从sina.com域名服务器NS记录中随机挑选了一个IP地址192.31.80.30查询<a href=\"http://www.sina.com,最后解析为c/\">www.sina.com，最后解析为C</a> name记录。最终是进行的迭代查询。</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217233949779.png\" alt=\"image-20221217233949779\"></p>\n<p>抓包查看，本机IP先向本地DNS服务器查询，类型是NS，类是IN（Internet）</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234002333.png\" alt=\"image-20221217234002333\"></p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234013354.png\" alt=\"image-20221217234013354\"></p>\n<p>本地服务器响应包，返回13个根域地址：</p>\n</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234026141.png\" alt=\"image-20221217234026141\"></p>\n<p>后面其他的DNS数据包同上，进行迭代查询。</p>\n<p><strong>若是进行了DNS劫持，可以使用dig +trace example.com进行追踪查询，其中必有一个DNS服务器的域名不正确。</strong></p>\n<h3 id=\"DNS区域传输\"><a href=\"#DNS区域传输\" class=\"headerlink\" title=\"DNS区域传输\"></a>DNS区域传输</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>区域传输发生在DNS服务器之间信息同步的过程，一台服务器的数据库变更，同步到其他服务器上，正常情况下区域传输只发生在本域的域名服务器之间；若是配置错误，那任何人可以和域名服务器进行区域传输，任何人都可以拿到所有的主机记录的名称以及IP地址。</p></blockquote>\n<ul>\n<li><p>若是区域传输配置错误的前提下，使用以下命令可以对目标服务器进行区域传输</p>\n<ul>\n<li><p>dig @ns1.example.com example.com axtr</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>指定na1.example.com域名服务器，下载example.com这个域的所有域名记录，区域传输使用的传输方法使用的是axfr，差异化的传输</p></blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<p>以ns4.sina.com为例，最终传输错误：</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234038637.png\" alt=\"image-20221217234038637\"></p>\n<p>抓包查看其过程：</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234048828.png\" alt=\"image-20221217234048828\"></p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234100123.png\" alt=\"image-20221217234100123\"></p>\n<p>先向本地的域名服务器查询了ns4.sina.com的A记录，本地域名服务器返回解析IP，之后进行区域传输时，进行TCP连接（域名查询的时候使用UDP），再进行AXFR类型的查询，最后拒绝连接。</p>\n<ul>\n<li><p>host -T -l sina.com ns3.sina.com</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>-l 参数进行AXFR的传输，-T 表示时间</p></blockquote>\n</li>\n</ul>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234110993.png\" alt=\"image-20221217234110993\"></p>\n<p>同样也是拒绝连接。</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234122447.png\" alt=\"image-20221217234122447\"></p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234133262.png\" alt=\"image-20221217234133262\"></p>\n<p>和dig命令相同，host命令同样也是先向本地域名服务器查询ns.sina.com的A记录和4A记录之后本地域名服务器将查询结果返回本地，然后本地向查询到的IP进行TCP连接，接着进行AXFR类型的查询，最终断开连接。</p>\n<h3 id=\"DNS字典爆破\"><a href=\"#DNS字典爆破\" class=\"headerlink\" title=\"DNS字典爆破\"></a>DNS字典爆破</h3><ul>\n<li><p>fierce –dns-servers 8.8.8.8 –domain example.com.cn –subdomain-file  a.txt</p>\n<p><code>fierce命令，参数--dns-server指定dns服务器，参数--domain指定要查询那个域，--subdomain-file 后面指定字典</code></p>\n<ul>\n<li><p>由于本地没有a.txt字典，使用dpkg查询一下fierce自带的字典路径</p>\n<ul>\n<li>命令：dpkg -L fierce</li>\n<li><code>dpkg基于debin的Linux的包管理程序，-L参数可以列出在系统上安装的相关生成的文件</code></li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234147262.png\" alt=\"image-20221217234147262\"></li>\n<li>使用more查看5000.txt</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234158356.png\" alt=\"image-20221217234158356\"></li>\n<li>使用cat查看是否有www之类的字段</li>\n<li>命令：cat &#x2F;usr&#x2F;lib&#x2F;python3&#x2F;dist-packages&#x2F;fierce&#x2F;lists&#x2F;5000.txt | grep www</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234212398.png\" alt=\"image-20221217234212398\"></li>\n</ul>\n</li>\n<li><p>进行爆破</p>\n<ul>\n<li><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>fierce –dns-servers 8.8.8.8 –domain sina.com.cn –subdomain-file  &#x2F;usr&#x2F;lib&#x2F;python3&#x2F;dist-packages&#x2F;fierce&#x2F;lists&#x2F;5000.txt</p></blockquote>\n</li>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234223304.png\" alt=\"image-20221217234223304\"></p>\n</li>\n</ul>\n<p>​        此时Found表示已经爆破出相关的子域名。</p>\n</li>\n</ul>\n</li>\n<li><p>dnsdict6 -d4 -t 16 -u sina.com</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-d4 显示ipv4&#x2F;6的地址 -t 可指定线程数；-x 指定使用什么级别的字典\n-s 小字典；-m 普通字典；-l 大字典；-x 更大字典；-u 超级字典\n-D 手动指定字典<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234233712.png\" alt=\"image-20221217234233712\"></li>\n</ul>\n</li>\n<li><p>dnsenum -f  dnsdict.txt -dnsserver 8.8.8.8 sina.com -o sina.xml</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-f 指定字典；-dnsserver 指定DNS服务器；-o 可导出xml文件<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<ul>\n<li><p>使用dpkg查找字典信息</p>\n</li>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234244590.png\" alt=\"image-20221217234244590\"></p>\n</li>\n<li><p>dnsenum -f  &#x2F;usr&#x2F;share&#x2F;dnsenum&#x2F;dns.txt  -dnsserver 8.8.8.8 sina.com -o sina.xml </p>\n</li>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234254896.png\" alt=\"image-20221217234254896\"></p>\n</li>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234306565.png\" alt=\"image-20221217234306565\"></p>\n</li>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234316667.png\" alt=\"image-20221217234316667\"></p>\n<p>dnsenum可以查询出NS，MX以及区域传输AXFR等信息。</p>\n</li>\n</ul>\n</li>\n<li><p>dnsmap sina.com -w dns.txt </p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-w 指定字典<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<ul>\n<li>dnsmap sina.com -w &#x2F;usr&#x2F;share&#x2F;dnsmap&#x2F;wordlist_TLAs.txt</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234335238.png\" alt=\"image-20221217234335238\"></li>\n</ul>\n</li>\n<li><p>dnsrecon -d sina.com –lifetime  10 -t brt -D dnsbog.txt</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-d 指定域名；--lifetime 超时时间；-t 指定查询强度，brt表示暴力爆破；-D 指定字典<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n\n\n<ul>\n<li>dnsrecon -d sina.com –lifetime  10 -t brt -D &#x2F;usr&#x2F;share&#x2F;dnsrecon&#x2F;namelist.txt</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234349463.png\" alt=\"image-20221217234349463\"></li>\n</ul>\n</li>\n<li><p>dnsrecon -d sina.com –lifetime 10 -t std -D  &#x2F;usr&#x2F;share&#x2F;dnsrecon&#x2F;namelist.txt</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">和上面的相同，这里的-t std表示标准爆破<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n\n\n<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234359428.png\" alt=\"image-20221217234359428\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"DNS注册信息\"><a href=\"#DNS注册信息\" class=\"headerlink\" title=\"DNS注册信息\"></a>DNS注册信息</h3><ul>\n<li><p>Whois查询</p>\n</li>\n<li><p>Whois -h whois.apnic.net x.x.x.x</p>\n<ul>\n<li><p>域名注册信息查询网站</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">http:&#x2F;&#x2F;www.afrinic.net\nhttp:&#x2F;&#x2F;www.apnic.net\nhttp:&#x2F;&#x2F;ws.arin.net\nhttp:&#x2F;&#x2F;www.iana.com\nhttp:&#x2F;&#x2F;www.icann.org\nhttp:&#x2F;&#x2F;www.lacnic.net\nhttp:&#x2F;&#x2F;www.nro.net\nhttp:&#x2F;&#x2F;www.ripe.net\nhttp:&#x2F;&#x2F;www.inernic.net<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n</ul>\n</li>\n<li><p>Kali下的Whois查询</p>\n<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234410740.png\" alt=\"image-20221217234410740\"></li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E8%A2%AB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90DNS%E7%AF%87%E3%80%91.htm/image-20221217234428733.png\" alt=\"image-20221217234428733\"></li>\n<li>后续可以使用社工进行攻击</li>\n</ul>\n<p>​</p>\n</li>\n</ul>\n","text":"公开渠道搜集被动信息搜集完全基于公开渠道的信息获取，这些信息都是在公开渠道被公开过；被动信息搜集就是通过公开渠道去搜集目标公司以及系统相关的信息，不会与目标系统产生直接交互访问，搜索渠道和手段都是基于搜索引擎，媒体网站等。 官方信息搜集文章： 美国军方： http://www.f...","link":"","photos":[],"count_time":{"symbolsCount":"4.2k","symbolsTime":"4 mins."},"categories":[{"name":"信息搜集","slug":"信息搜集","count":10,"path":"api/categories/信息搜集.json"}],"tags":[{"name":"信息搜集","slug":"信息搜集","count":11,"path":"api/tags/信息搜集.json"},{"name":"Kali","slug":"Kali","count":27,"path":"api/tags/Kali.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AC%E5%BC%80%E6%B8%A0%E9%81%93%E6%90%9C%E9%9B%86\"><span class=\"toc-text\">公开渠道搜集</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E5%86%85%E5%AE%B9\"><span class=\"toc-text\">信息搜集内容</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%A1%E6%81%AF%E7%94%A8%E9%80%94\"><span class=\"toc-text\">信息用途</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E2%80%94DNS\"><span class=\"toc-text\">信息搜集—DNS</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DNS%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E2%80%94NSLOOKUP\"><span class=\"toc-text\">DNS信息搜集—NSLOOKUP</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DNS%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E2%80%94DIG\"><span class=\"toc-text\">DNS信息搜集—DIG</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E8%BE%93\"><span class=\"toc-text\">DNS区域传输</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DNS%E5%AD%97%E5%85%B8%E7%88%86%E7%A0%B4\"><span class=\"toc-text\">DNS字典爆破</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DNS%E6%B3%A8%E5%86%8C%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">DNS注册信息</span></a></li></ol></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Kali渗透测试-被动信息搜集【搜索引擎篇】","uid":"ada03ac2e58b4b7f52c6c416827cfa9d","slug":"Kali渗透测试-被动信息搜集【搜索引擎篇】","date":"2022-12-06T12:34:10.000Z","updated":"2022-12-17T15:33:00.616Z","comments":true,"path":"api/articles/Kali渗透测试-被动信息搜集【搜索引擎篇】.json","keywords":null,"cover":[],"text":"搜索引擎利用Hacking语法进行信息搜集： 公司新闻动态 重要雇员信息 机密文档&#x2F;网络拓扑 搜索引擎会爬取任何数据，尽管没有对外公布 用户名密码 目标系统软硬件技术架构 搜索引擎获取Banner信息，了解其架构 SHODAN 搜索联网设备 Banner：http、ft...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"信息搜集","slug":"信息搜集","count":10,"path":"api/categories/信息搜集.json"}],"tags":[{"name":"信息搜集","slug":"信息搜集","count":11,"path":"api/tags/信息搜集.json"},{"name":"Kali","slug":"Kali","count":27,"path":"api/tags/Kali.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"正则表达式","uid":"03a1af7058cec8bb8efe418ed228e157","slug":"正则表达式","date":"2022-10-31T00:38:44.000Z","updated":"2022-10-31T02:17:40.177Z","comments":true,"path":"api/articles/正则表达式.json","keywords":null,"cover":[],"text":"0x00脑图： 0x01 正则语法（入门） 字符组（[]）允许匹配一组可能出现的字符。 区间： 连字符(-)代表区间： 要匹配任意数字可以使用[0-9]； 如果想要匹配所有小写字母，可以写成[a-z]； 想要匹配所有大写字母可以写成[A-Z]。 匹配特殊字符 使用\\进行都特殊字符...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"Python","slug":"Python","count":1,"path":"api/categories/Python.json"}],"tags":[{"name":"Python","slug":"Python","count":1,"path":"api/tags/Python.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}