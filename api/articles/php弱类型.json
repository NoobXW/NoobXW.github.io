{"title":"php弱类型","uid":"475a4194f2b842990d8398d70f0c7aaf","slug":"php弱类型","date":"2022-03-15T08:32:55.000Z","updated":"2022-07-23T15:40:46.387Z","comments":true,"path":"api/articles/php弱类型.json","keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在CTF平台做题时，遇到很多php弱类型的题目，也看了很多php弱类型的文章，在这里总结一下。</p>\n<h2 id=\"0x00\"><a href=\"#0x00\" class=\"headerlink\" title=\"0x00\"></a>0x00</h2><p>php中有两种比较的符号 <code>==</code> 与 <code>===</code></p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">1 <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token number\">2</span> <span class=\"token variable\">$a</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$b</span> <span class=\"token punctuation\">;</span>\n<span class=\"token number\">3</span> <span class=\"token variable\">$a</span><span class=\"token operator\">===</span><span class=\"token variable\">$b</span> <span class=\"token punctuation\">;</span>\n<span class=\"token number\">4</span> <span class=\"token delimiter important\">?></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><code>===</code> 在进行比较的时候，会先判断两种字符串的类型是否相等，再比较</p>\n<p><code>==</code> 在进行比较的时候，会先将字符串类型转化成相同，再比较</p>\n<p><strong>这里明确了说如果一个数值和字符串进行比较的时候，会将字符串转换成数值</strong></p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">1 <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token number\">2</span> <span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"admin\"</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//true</span>\n<span class=\"token number\">3</span> <span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"1admin\"</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n<span class=\"token number\">4</span> <span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"admin1\"</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//false</span>\n<span class=\"token number\">5</span> <span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"admin1\"</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//true</span>\n<span class=\"token number\">6</span> <span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"0e123456\"</span><span class=\"token operator\">==</span><span class=\"token string double-quoted-string\">\"0e4456789\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true </span>\n<span class=\"token number\">7</span> <span class=\"token delimiter important\">?></span></span> <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">1 观察上述代码，&quot;admin&quot;&#x3D;&#x3D;0 比较的时候，会将admin转化成数值，强制转化,由于admin是字符串，转化的结果是0自然和0相等\n2 &quot;1admin&quot;&#x3D;&#x3D;1 比较的时候会将1admin转化成数值,结果为1，而“admin1“&#x3D;&#x3D;1 却等于错误，也就是&quot;admin1&quot;被转化成了0,为什么呢？？\n3 &quot;0e123456&quot;&#x3D;&#x3D;&quot;0e456789&quot;相互比较的时候，会将0e这类字符串识别为科学技术法的数字，0的无论多少次方都是零，所以相等<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>对于上述的问题查了php手册</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">当一个字符串欸当作一个数值来取值，其结果和类型如下:如果该字符串没有包含&#39;.&#39;,&#39;e&#39;,&#39;E&#39;并且其数值值在整形的范围之内\n该字符串被当作int来取值，其他所有情况下都被作为float来取值，该字符串的开始部分决定了它的值，如果该字符串以合法的数值开始，则使用该数值，否则其值为0。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\">1 <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token number\">2</span> <span class=\"token variable\">$test</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token string double-quoted-string\">\"10.5\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// $test=11.5(float)</span>\n<span class=\"token number\">3</span> <span class=\"token variable\">$test</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">+</span><span class=\"token string double-quoted-string\">\"-1.3e3\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//$test=-1299(float)</span>\n<span class=\"token number\">4</span> <span class=\"token variable\">$test</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">+</span><span class=\"token string double-quoted-string\">\"bob-1.3e3\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//$test=1(int)</span>\n<span class=\"token number\">5</span> <span class=\"token variable\">$test</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">+</span><span class=\"token string double-quoted-string\">\"2admin\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//$test=3(int)</span>\n<span class=\"token number\">6</span> <span class=\"token variable\">$test</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">+</span><span class=\"token string double-quoted-string\">\"admin2\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//$test=1(int)</span>\n<span class=\"token number\">7</span> <span class=\"token delimiter important\">?></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>所以就解释了”admin1”&#x3D;&#x3D;1 &#x3D;&gt;False 的原因</p>\n<h2 id=\"0x01-总结\"><a href=\"#0x01-总结\" class=\"headerlink\" title=\"0x01 总结\"></a>0x01 总结</h2><p>这些php弱类型只是冰山一角 上述验证了代码审计的重要性</p>\n<p>参考原文：</p>\n<p><a href=\"https://www.cnblogs.com/Mrsm1th/p/6745532.html\">https://www.cnblogs.com/Mrsm1th/p/6745532.html</a></p>\n","text":"前言在CTF平台做题时，遇到很多php弱类型的题目，也看了很多php弱类型的文章，在这里总结一下。 0x00php中有两种比较的符号 == 与 === 1 &lt;?php 2 $a = $b ; 3 $a===$b ; 4 ?> === 在进行比较的时候，会先判断两种字符串的类...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"CTF","slug":"CTF","count":10,"path":"api/categories/CTF.json"}],"tags":[{"name":"CTF","slug":"CTF","count":19,"path":"api/tags/CTF.json"},{"name":"PHP","slug":"PHP","count":5,"path":"api/tags/PHP.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x00\"><span class=\"toc-text\">0x00</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x01-%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">0x01 总结</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"攻防世界-web-backup","uid":"34ee629d2bfd49882af5b4a30f7de5be","slug":"攻防世界-web-backup","date":"2022-03-15T09:19:29.000Z","updated":"2022-03-15T09:27:07.975Z","comments":true,"path":"api/articles/攻防世界-web-backup.json","keywords":null,"cover":[],"text":"前言记录一下攻防世界新手区，web-backup这道题。关于index.php的备份文件。 0x00启动靶场，看到：你知道index.php的备份文件名吗？ 0x01使用搜索引擎 0x02在地址栏输入：index.php.bak，可以看到备份文件下载完成 0x03打开备份文件，拿...","link":"","photos":[],"count_time":{"symbolsCount":193,"symbolsTime":"1 mins."},"categories":[{"name":"CTF","slug":"CTF","count":10,"path":"api/categories/CTF.json"}],"tags":[{"name":"CTF","slug":"CTF","count":19,"path":"api/tags/CTF.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"墨者学院-命令执行","uid":"63b4d5992a8dc61b2cccec272a36e569","slug":"墨者学院-命令执行","date":"2022-03-13T01:39:21.000Z","updated":"2022-03-20T11:50:42.422Z","comments":true,"path":"api/articles/墨者学院-命令执行.json","keywords":null,"cover":[],"text":"#命令执行注入 0x00启动靶场环境 0x01提示输入ip地址 先测试一下 可以看到成功ping的返回信息。 0x02接下来尝试使用管道符执行ls命令查看目录 这里判断的时候出现弹窗提示ip格式不对，先看下源码是不是前端验证 果然，那这里的话就需要绕过前端验证。 0x03抓包进行...","link":"","photos":[],"count_time":{"symbolsCount":529,"symbolsTime":"1 mins."},"categories":[{"name":"RCE","slug":"RCE","count":3,"path":"api/categories/RCE.json"}],"tags":[{"name":"CTF","slug":"CTF","count":19,"path":"api/tags/CTF.json"},{"name":"RCE","slug":"RCE","count":4,"path":"api/tags/RCE.json"},{"name":"靶场","slug":"靶场","count":12,"path":"api/tags/靶场.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}