{"title":"架构，搭建，WAF等","uid":"e1bdafc064990b71004087aa4da077ab","slug":"架构，搭建，WAF等","date":"2022-01-28T11:21:46.000Z","updated":"2022-02-13T15:48:41.525Z","comments":true,"path":"api/articles/架构，搭建，WAF等.json","keywords":null,"cover":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><p>[TOC]</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在安全测试中，信息收集是非常重要的一个环节，此环节的信息将影响 到后续的成功几率，掌握信息的多少将决定发现漏洞机会大小，换言之决定着是否能完成目标的测试任务。渗透测试的思路 就是从信息收集这里开始。</p>\n<p><img src=\"/post/%E6%9E%B6%E6%9E%84%EF%BC%8C%E6%90%AD%E5%BB%BA%EF%BC%8CWAF%E7%AD%89.htm/image-20220128201243759.png\" alt=\"image-20220128201243759\"></p>\n<p>所谓信息搜集，其实就是为了扩大攻击面，信息搜集的越多，攻击的范围越大。</p>\n<h2 id=\"站点搭建分析\"><a href=\"#站点搭建分析\" class=\"headerlink\" title=\"站点搭建分析\"></a>站点搭建分析</h2><p>1.**搭建习惯-目录型站点 **：主站是一套程序，加一个目录打开后又是一套程序；两套程序会有两个漏洞形式（扫描目录或其他方法）；</p>\n<p>2.<strong>搭建习惯-端口类站点</strong> ：网站管理员通过端口名使网站应用分开，例如：主站装在80端口，或其他端口配置其他服务，但是都在同一台服务器，若其中端口出现了问题，例如80端口出现漏洞，会影响其他端口（扫描端口或其他方法）；</p>\n<p>3.<strong>搭建习惯-子域名站点</strong> ：子站和主站不在一台服务器上，如果在一个网段的话，会出现内网安全隐患；</p>\n<p>如果不同网段的话，搜集子站其他关于主站的信息再进行主站测试；</p>\n<p>4.<strong>搭建习惯-类似域名站点</strong> ：域名的后缀不同或者域名的名字有所修改等，可以自己写个工具跑一下类似域名；可以在搜索引擎搜索 <strong>域名+php</strong> 或直接搜索域名找<strong>类似站点</strong>搜集更多信息。</p>\n<p>5.<strong>搭建习惯-旁注,C 段站点</strong> ：</p>\n<p><strong>旁注</strong>：同服务器，不同站点；例如：有 a站，b站等网站（多个站点服务器），我的目标的是b站，我通过查询又知道了有a站和其他站的存在，b站由于技术有限找不到漏洞；再找a站或其他站的权限问题再去获取到b站的权限；旁注查询：<a href=\"https://www.webscan.cc/\">https://www.webscan.cc/</a></p>\n<p><strong>C段</strong>：同网段，不同服务器，不同站点；例如：有a站，b站，c站和d站；目标是a站，查询网段信息，比如查询到了c站的网段，这个网段下有个多个网站，拿到其中一个站的权限，在通过提权获取到这个服务器的权限，由于目标主机处于同一内网下，再实施内网安全的测试方法获取到指定网站的服务器权限；</p>\n<p>6.<strong>搭建习惯-搭建软件特征站点</strong> ：例如：phpstudy除新版本外采用root&#x2F;root作为数据库的默认密码；还有phpmyadmin文件夹，可以进入phpmyadmin文件夹使用默认数据库密码进入数据库</p>\n<p>##WAF 防护分析</p>\n<p>1.什么是WAF应用：</p>\n<p>Web应用防护系统（也称为：<a href=\"https://baike.baidu.com/item/%E7%BD%91%E7%AB%99/155722\">网站</a>应用级入侵防御系统。英文：Web Application Firewall，简称： WAF）。利用<a href=\"https://baike.baidu.com/item/%E5%9B%BD%E9%99%85/766689\">国际</a>上公认的一种说法：Web应用<a href=\"https://baike.baidu.com/item/%E9%98%B2%E7%81%AB%E5%A2%99\">防火墙</a>是通过执行一系列针对HTTP&#x2F;HTTPS的<a href=\"https://baike.baidu.com/item/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5/2890163\">安全策略</a>来专门为<a href=\"https://baike.baidu.com/item/Web/150564\">Web</a>应用提供保护的一款产品。</p>\n<p>2.如何快速识别WAF：wafw00f或者手工识别；部分网站数据包有此字段：X-Powered-By: WAF</p>\n<p>3.识别WAF对于安全测试的意义：了解是什么WAF，进行下一步。</p>\n<h2 id=\"APP及其他资产等\"><a href=\"#APP及其他资产等\" class=\"headerlink\" title=\"APP及其他资产等\"></a>APP及其他资产等</h2><p>在安全测试中，若 WEB 无法取得进展或无 WEB 的情况下，我们需要 借助 APP 或其他资产在进行信息收集，从而开展后续渗透。</p>\n<h3 id=\"APP-提取及抓包及后续配合\"><a href=\"#APP-提取及抓包及后续配合\" class=\"headerlink\" title=\"APP 提取及抓包及后续配合\"></a>APP 提取及抓包及后续配合</h3><p>APP如果涉及WEB，按照WEB思路继续渗透；</p>\n<p>APP如果不涉及WEB：</p>\n<p><strong>各种端口一顿乱扫</strong>-思路 </p>\n<p><strong>各种接口一顿乱扫</strong>-思路 </p>\n<p><strong>接口部分一顿测试</strong>-思路</p>\n<p>利用黑暗引擎搜索–乱扫：</p>\n<p><a href=\"https://fofa.so/\">https://fofa.so/</a></p>\n<p><a href=\"https://www.shodan.io/\">https://www.shodan.io/</a></p>\n<p><a href=\"https://www.zoomeye.org/\">https://www.zoomeye.org/</a></p>\n<p>乱扫的目的是为了搜集更广泛的信息，扩大攻击面，为后续的渗透奠定坚实的基础。</p>\n<h2 id=\"资产监控拓展\"><a href=\"#资产监控拓展\" class=\"headerlink\" title=\"资产监控拓展\"></a>资产监控拓展</h2><p>域名搜集途径：</p>\n<p><img src=\"/post/%E6%9E%B6%E6%9E%84%EF%BC%8C%E6%90%AD%E5%BB%BA%EF%BC%8CWAF%E7%AD%89.htm/image-20220129220745739.png\" alt=\"image-20220129220745739\"></p>\n<p>##各种子域名查询</p>\n<p>1.DNS,备案,证书：利用站长工具进行搜集</p>\n<p>2.全球节点请求 cdn</p>\n<p>3.枚举爆破或解析子域名对应</p>\n<p>4.便于发现管理员相关的注册信息</p>\n<p>##Github 监控</p>\n<p>1.便于收集整理最新 exp 或 poc</p>\n<p>2.便于发现相关测试目标的资产</p>\n<p>（需要导入一个python脚本进行微信推送）</p>\n<h2 id=\"涉及网站\"><a href=\"#涉及网站\" class=\"headerlink\" title=\"涉及网站\"></a>涉及网站</h2><p>全球CDN服务查询：<a href=\"http://tools.ipip.net/cdn.php\">http://tools.ipip.net/cdn.php</a></p>\n<p>查询DNS解析记录：<a href=\"https://securitytrails.com/\">https://securitytrails.com/</a></p>\n<p>​                                   <a href=\"https://dnsdb.io/zh-cn/\">https://dnsdb.io/zh-cn/</a></p>\n<p>(更多查看思维导图)</p>\n","text":"[TOC] 前言在安全测试中，信息收集是非常重要的一个环节，此环节的信息将影响 到后续的成功几率，掌握信息的多少将决定发现漏洞机会大小，换言之决定着是否能完成目标的测试任务。渗透测试的思路 就是从信息收集这里开始。 所谓信息搜集，其实就是为了扩大攻击面，信息搜集的越多，攻击的范围...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"信息搜集","slug":"信息搜集","count":10,"path":"api/categories/信息搜集.json"}],"tags":[{"name":"信息搜集","slug":"信息搜集","count":11,"path":"api/tags/信息搜集.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AB%99%E7%82%B9%E6%90%AD%E5%BB%BA%E5%88%86%E6%9E%90\"><span class=\"toc-text\">站点搭建分析</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#APP%E5%8F%8A%E5%85%B6%E4%BB%96%E8%B5%84%E4%BA%A7%E7%AD%89\"><span class=\"toc-text\">APP及其他资产等</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#APP-%E6%8F%90%E5%8F%96%E5%8F%8A%E6%8A%93%E5%8C%85%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%85%8D%E5%90%88\"><span class=\"toc-text\">APP 提取及抓包及后续配合</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%B5%84%E4%BA%A7%E7%9B%91%E6%8E%A7%E6%8B%93%E5%B1%95\"><span class=\"toc-text\">资产监控拓展</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B6%89%E5%8F%8A%E7%BD%91%E7%AB%99\"><span class=\"toc-text\">涉及网站</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"WEB漏洞知识点","uid":"cadd35667758fe128c74aec131ce6e19","slug":"WEB漏洞知识点","date":"2022-01-30T07:21:56.000Z","updated":"2022-02-13T15:47:15.060Z","comments":true,"path":"api/articles/WEB漏洞知识点.json","keywords":null,"cover":[],"text":"[TOC] ##前言 WEB层面涉及的漏洞关系到渗透过程中的方方面面，漏洞的危害等级以及影响的范围等，要明白各个漏洞的形成原理，并且要明白如何去发现，如何去利用。 常见漏洞原理 SQL注入：简称注入攻击、SQL注入，被广泛用于非法获取网站控制权，是发生在应用程序的数据库层上的安全...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"基础知识","slug":"基础知识","count":8,"path":"api/categories/基础知识.json"}],"tags":[{"name":"基础知识","slug":"基础知识","count":12,"path":"api/tags/基础知识.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"CDN绕过技术","uid":"83206ee7fe571f3999f994cc9873ecbb","slug":"CDN绕过技术","date":"2022-01-28T02:50:43.000Z","updated":"2022-02-15T12:16:41.739Z","comments":true,"path":"api/articles/CDN绕过技术.json","keywords":null,"cover":[],"text":"[TOC] CDN绕过CDN的全称是Content Delivery Network，即内容分发网络。CDN是构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"基础知识","slug":"基础知识","count":8,"path":"api/categories/基础知识.json"}],"tags":[{"name":"信息搜集","slug":"信息搜集","count":11,"path":"api/tags/信息搜集.json"},{"name":"基础知识","slug":"基础知识","count":12,"path":"api/tags/基础知识.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}