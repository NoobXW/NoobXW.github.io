{"title":"Kali渗透测试-主动信息搜集【二层】","uid":"569a0f2ea0be37f93bd60ef29cd8c870","slug":"Kali渗透测试-主动信息搜集【二层】","date":"2022-12-10T01:36:56.000Z","updated":"2023-01-28T16:44:39.801Z","comments":true,"path":"api/articles/Kali渗透测试-主动信息搜集【二层】.json","keywords":null,"cover":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><h2 id=\"主动信息搜集\"><a href=\"#主动信息搜集\" class=\"headerlink\" title=\"主动信息搜集\"></a>主动信息搜集</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>被动信息搜集可能搜集到的信息不是最新的信息，而是历史信息，由此，需要使用主动信息搜集对被动信息搜集得到的结果进行确认和验证，并且通过主动的手段发现更新，更准确，更完善的信息，以致于对后续渗透更有帮助。</p></blockquote>\n<ul>\n<li>直接与目标系统交互通信</li>\n<li>无法避免留下访问的痕迹</li>\n<li>使用受控的第三方电脑进行探测<ul>\n<li>使用代理或已经被控制的主机</li>\n<li>做好被封杀的准备</li>\n<li>使用嗓声信息迷惑目标，淹没真实的探测流量</li>\n</ul>\n</li>\n<li>扫描<ul>\n<li>发送不同的探测，根据返回结果判断目标状态</li>\n<li>IP层</li>\n<li>端口层</li>\n<li>服务层</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"发现阶段\"><a href=\"#发现阶段\" class=\"headerlink\" title=\"发现阶段\"></a>发现阶段</h2><ul>\n<li>识别存活主机<ul>\n<li>潜在的被攻击目标</li>\n</ul>\n</li>\n<li>输出一个IP地址列表</li>\n<li>2、3、4层发现</li>\n</ul>\n<h2 id=\"发现—二层发现\"><a href=\"#发现—二层发现\" class=\"headerlink\" title=\"发现—二层发现\"></a>发现—二层发现</h2><ul>\n<li>优点：扫描速度快、可靠</li>\n<li>缺点：不可路由</li>\n<li>Arp协议<ul>\n<li>抓包</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Arping\"><a href=\"#Arping\" class=\"headerlink\" title=\"Arping\"></a>Arping</h3><ul>\n<li>arping 192.168.216.2 -c 1  # -c 参数表示发送包的数量<ul>\n<li>收包成功<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210101311801.png\" alt=\"image-20221210101311801\"></li>\n</ul>\n</li>\n<li>收包失败<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210101359679.png\" alt=\"image-20221210101359679\"></li>\n</ul>\n</li>\n<li>抓包<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210101646501.png\" alt=\"image-20221210101646501\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>arping 192.168.216.2 -d   # -d 发现重复的响应，发现两个不同的MAC地址，拥有同一个IP（可进行ARP欺骗，进行中间人攻击）<ul>\n<li>arp<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210102242748.png\" alt=\"image-20221210102242748\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>arping -c 1 192.168.216.2 | grep “bytes from” | cut -d” “ -f 5 | cut -d”(“ -f 2 | cut -d”)” -f 1<ul>\n<li>-c 1 只发送一个包；grep 匹配bytes from数据包；cut -d” “ -f 5通过空格进行筛选第5列的内容； cut -d”(“ -f 2 | cut -d”)” -f 1 通过括号进行筛选第2列和第1列的内容<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210104028235.png\" alt=\"image-20221210104028235\"></li>\n</ul>\n</li>\n<li>arping -c 1 192.168.216.2 | grep “bytes from” <ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210104102502.png\" alt=\"image-20221210104102502\"></li>\n</ul>\n</li>\n<li>arping-c 1 192.168.216.2 | grep “bytes from” | cut -d” “ -f 5 <ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210104133409.png\" alt=\"image-20221210104133409\"></li>\n</ul>\n</li>\n<li>arping -c 1 192.168.216.2 | grep “bytes from” | cut -d” “ -f 5 | cut -d”(“ -f 2<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210104220530.png\" alt=\"image-20221210104220530\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Arping只能ping一个目标的IP地址，不能ping一个网段，例如：192.168.216.0&#x2F;24这样的网段是不支持扫描的，因此使用arping的shell脚本来实现对于网段的扫描</p></blockquote>\n<p>由于从Windows下编写的shell脚本，执行时会提示”bad interpreter:No such file or directory“错误，是文件格式的问题。</p>\n<p>文章地址：<a href=\"http://www.kaotop.com/it/37690.html\">http://www.kaotop.com/it/37690.html</a></p>\n<p>解决方法：</p>\n<p>vim filename</p>\n<p>在使用set ff&#x3D;unix强制转换为unix格式，存盘退出即可：</p>\n<p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210114809030.png\" alt=\"image-20221210114809030\"></p>\n<ul>\n<li>使用arping脚本实现网段扫描<ul>\n<li>.&#x2F;arping1.sh eth0<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210115501471.png\" alt=\"image-20221210115501471\"></li>\n</ul>\n</li>\n<li>抓包可以看到在扫描整个网段<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210115306243.png\" alt=\"image-20221210115306243\"></li>\n</ul>\n</li>\n<li>以文件的形式输出<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210120525109.png\" alt=\"image-20221210120525109\"></li>\n</ul>\n</li>\n<li>调用文件的IP进行探测，文件中存在存活IP则输出<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210120649864.png\" alt=\"image-20221210120649864\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Nmap—二层发现\"><a href=\"#Nmap—二层发现\" class=\"headerlink\" title=\"Nmap—二层发现\"></a>Nmap—二层发现</h3><ul>\n<li><p>nmap -sn 192.168.216.2</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-sn 不做端口扫描，只做二层的发现\n可支持地址段的扫描(速度快，内容多):<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<ul>\n<li><p>nmap -sn 192.168.216.0&#x2F;24</p>\n</li>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210122302578.png\" alt=\"image-20221210122302578\"></p>\n</li>\n<li><p>nmap -iL iplist.txt -sn</p>\n</li>\n<li><pre><code>-iL 调用地址列表中的地址进行扫描\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>nmap -sn参数不只是对Arp进行查询</p>\n<ul>\n<li><p>抓包</p>\n<ul>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210123028936.png\" alt=\"image-20221210123028936\"></p>\n</li>\n<li><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>nmap使用-sn进行arp扫描时，还会进行域名解析，查询PTR记录</p></blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Netdiscover\"><a href=\"#Netdiscover\" class=\"headerlink\" title=\"Netdiscover\"></a>Netdiscover</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>可以使用于主动发现，也可以使用于被动发现</p>\n<ol>\n<li>专用于二层发现</li>\n<li>可用于无线和交换网络环境</li>\n<li>主动和被动探测</li>\n</ol></blockquote>\n<ul>\n<li><p>主动发现</p>\n<ul>\n<li>netdiscover -i eth0 -r 192.168.216.0&#x2F;24<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210172053819.png\" alt=\"image-20221210172053819\"></li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210172125761.png\" alt=\"image-20221210172125761\"></li>\n</ul>\n</li>\n<li>netdiscover -l iplist.txt  # 也可以使用IP地址列表进行探测</li>\n</ul>\n</li>\n<li><p>被动</p>\n<ul>\n<li><p>原理：不主动发arp包，只是默默侦听，将网卡置为混杂模式，收取非本网卡IP和MAC地址的数据包，只要网络中某一台机器发了广播包，就可以侦听到这个数据包。（主动arp容易被入侵检测等设备触发报警）</p>\n</li>\n<li><p>netdiscover -p</p>\n<ul>\n<li><p><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210172316272.png\" alt=\"image-20221210172316272\"></p>\n</li>\n<li><p>上图中的<code>passive</code>就是被动式扫描</p>\n</li>\n</ul>\n</li>\n<li><p>触发一个ARP包</p>\n<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210172740098.png\" alt=\"image-20221210172740098\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Scapy\"><a href=\"#Scapy\" class=\"headerlink\" title=\"Scapy\"></a>Scapy</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>作为Python库进行调用</p>\n<p>也可作为单独的工具使用</p>\n<p>抓包、分析、创建、修改、注入网络流量</p></blockquote>\n<ul>\n<li><p>Scapy</p>\n<ul>\n<li><p>Scapy中集成大量函数，调用时需要大写</p>\n</li>\n<li><p>ARP().display()</p>\n<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210173609579.png\" alt=\"image-20221210173609579\"></li>\n<li>直接一行输出指令</li>\n<li>sr1(ARP(pdst&#x3D;”192.168.216.2”))</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210181108246.png\" alt=\"image-20221210181108246\"></li>\n</ul>\n</li>\n<li><p>定义变量调用函数</p>\n<ul>\n<li>arp&#x3D;ARP()</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210174208672.png\" alt=\"image-20221210174208672\"></li>\n<li>arp.pdst&#x3D;”192.168.216.2”      # 将目标地址属性字段进行赋值</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210174330131.png\" alt=\"image-20221210174330131\"></li>\n</ul>\n</li>\n<li><p>sr1()     # 定义好相关参数之后使用Sr1()函数进行发包</p>\n<ul>\n<li>接收到应答包</li>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210174710363.png\" alt=\"image-20221210174710363\"></li>\n</ul>\n</li>\n<li><p>answer&#x3D;sr1(arp)    # 将应答包赋给一个变量<code>answer</code>，调用<code>answer.display()</code>显示包结构和内容 </p>\n<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210175042440-1670665905139-1.png\" alt=\"image-20221210175042440\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>*<em>注：当scapy请求一个不存在的IP是会一直不停的发包，知道该IP接收到为止，这种情况，以至于某一个IP不存在导致后续扫描无法正常进行，由此需要加一个超时时间timeout&#x3D;<em>s，参数verbose&#x3D;1表示将详细的报错信息也显示出来，verbose&#x3D;0则不显示。</em></em></p>\n<ul>\n<li>使用一个不存在的IP进行扫描<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210181935030.png\" alt=\"image-20221210181935030\"></li>\n<li>加入<code>timeout</code>字段和<code>verbose</code>字段<ul>\n<li><img src=\"/post/Kali%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E3%80%90%E4%BA%8C%E5%B1%82%E3%80%91.htm/image-20221210182356926.png\" alt=\"image-20221210182356926\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Summary\"><a href=\"#Summary\" class=\"headerlink\" title=\"Summary\"></a>Summary</h2><p>二层发现一般是已经拿到一台机器的控制权，要对内网进行渗透，需要用二层工具获取内网其他的存活主机进行进一步渗透，拿下更多的主机。</p>\n","text":"主动信息搜集 被动信息搜集可能搜集到的信息不是最新的信息，而是历史信息，由此，需要使用主动信息搜集对被动信息搜集得到的结果进行确认和验证，并且通过主动的手段发现更新，更准确，更完善的信息，以致于对后续渗透更有帮助。 直接与目标系统交互通信 无法避免留下访问的痕迹 使用受控的第三方...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"信息搜集","slug":"信息搜集","count":10,"path":"api/categories/信息搜集.json"}],"tags":[{"name":"信息搜集","slug":"信息搜集","count":11,"path":"api/tags/信息搜集.json"},{"name":"Kali","slug":"Kali","count":27,"path":"api/tags/Kali.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86\"><span class=\"toc-text\">主动信息搜集</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%91%E7%8E%B0%E9%98%B6%E6%AE%B5\"><span class=\"toc-text\">发现阶段</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%91%E7%8E%B0%E2%80%94%E4%BA%8C%E5%B1%82%E5%8F%91%E7%8E%B0\"><span class=\"toc-text\">发现—二层发现</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Arping\"><span class=\"toc-text\">Arping</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Nmap%E2%80%94%E4%BA%8C%E5%B1%82%E5%8F%91%E7%8E%B0\"><span class=\"toc-text\">Nmap—二层发现</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Netdiscover\"><span class=\"toc-text\">Netdiscover</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Scapy\"><span class=\"toc-text\">Scapy</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Summary\"><span class=\"toc-text\">Summary</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Kali渗透测试-主动信息搜集【三层】","uid":"fdfdea21437da4c26453fa91e3c5de6d","slug":"Kali渗透测试-主动信息搜集【三层】","date":"2022-12-11T01:51:11.000Z","updated":"2022-12-17T15:30:25.831Z","comments":true,"path":"api/articles/Kali渗透测试-主动信息搜集【三层】.json","keywords":null,"cover":[],"text":"主动信息搜集—三层发现 优点 可路由 速度比较快 缺点 速度比二层慢 经常被边界防火墙过滤 IP、icmp协议 Ping ping 192.168.216.2 -c 5 -c 指定发送5个包 ping -R 1.1.1.1 # -R 记录经过的路由 -R参数记录的是离发送端远的端...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"信息搜集","slug":"信息搜集","count":10,"path":"api/categories/信息搜集.json"}],"tags":[{"name":"信息搜集","slug":"信息搜集","count":11,"path":"api/tags/信息搜集.json"},{"name":"Kali","slug":"Kali","count":27,"path":"api/tags/Kali.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Kali渗透测试-被动信息搜集【搜索引擎篇】","uid":"ada03ac2e58b4b7f52c6c416827cfa9d","slug":"Kali渗透测试-被动信息搜集【搜索引擎篇】","date":"2022-12-06T12:34:10.000Z","updated":"2022-12-17T15:33:00.616Z","comments":true,"path":"api/articles/Kali渗透测试-被动信息搜集【搜索引擎篇】.json","keywords":null,"cover":[],"text":"搜索引擎利用Hacking语法进行信息搜集： 公司新闻动态 重要雇员信息 机密文档&#x2F;网络拓扑 搜索引擎会爬取任何数据，尽管没有对外公布 用户名密码 目标系统软硬件技术架构 搜索引擎获取Banner信息，了解其架构 SHODAN 搜索联网设备 Banner：http、ft...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"信息搜集","slug":"信息搜集","count":10,"path":"api/categories/信息搜集.json"}],"tags":[{"name":"信息搜集","slug":"信息搜集","count":11,"path":"api/tags/信息搜集.json"},{"name":"Kali","slug":"Kali","count":27,"path":"api/tags/Kali.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}