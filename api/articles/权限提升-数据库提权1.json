{"title":"权限提升-数据库提权1","uid":"1989a1e5dad512659756c4dce4a56243","slug":"权限提升-数据库提权1","date":"2022-06-20T08:13:30.000Z","updated":"2022-06-21T00:44:39.773Z","comments":true,"path":"api/articles/权限提升-数据库提权1.json","keywords":null,"cover":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><h2 id=\"0x00\"><a href=\"#0x00\" class=\"headerlink\" title=\"0x00\"></a>0x00</h2><p>脑图：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83.png\" alt=\"数据库提权\"></p>\n<h2 id=\"0x01-数据库提权的意义及流程\"><a href=\"#0x01-数据库提权的意义及流程\" class=\"headerlink\" title=\"0x01 数据库提权的意义及流程\"></a>0x01 数据库提权的意义及流程</h2><p>1、意义：在利用系统溢出漏洞无果的情况下，可以采用数据库进行提权；但需要知道数据库提权的前提条件：服务器开启数据库服务及获取到最高权限用户密码。除 Access 数据库外，其他数据库基本都存在数据库提权的可能。</p>\n<p>2、流程 ：服务探针-信息收集-提权利用-获取权限</p>\n<p>（一般提权是拥有普通用户的权限之后，或者webshell的权限之后进行的权限提升。）</p>\n<h2 id=\"0x02-WEB或本地环境探针数据库应用\"><a href=\"#0x02-WEB或本地环境探针数据库应用\" class=\"headerlink\" title=\"0x02 WEB或本地环境探针数据库应用\"></a>0x02 WEB或本地环境探针数据库应用</h2><p>1、通过探针判断有数据库相关的服务</p>\n<p>2、通过端口扫描看是否开启对应端口</p>\n<p>3、通过命令段看是否开启相关服务</p>\n<p>4、通过浏览文件或文件夹判定是否安装相关数据库</p>\n<h2 id=\"0x03-数据库提权权限用户密码收集等方法\"><a href=\"#0x03-数据库提权权限用户密码收集等方法\" class=\"headerlink\" title=\"0x03 数据库提权权限用户密码收集等方法\"></a>0x03 数据库提权权限用户密码收集等方法</h2><p>1、配置文件、储存文件、暴力拆解、其他方式</p>\n<p>2、配置文件：一些需要调用数据库的程序会有配置文件记录账号密码</p>\n<p>3、储存文件：将数据库中的一些储存文件下载还原，解析里面的账号密码</p>\n<p>4、暴力拆解：通过爆破脚本等爆破密码</p>\n<p>（一般是前两种，第一种最常见。从相关的配置文件中获得账号密码。）</p>\n<p>5、数据库的安装目录下有“data”目录，“data”下的每个文件夹对应数据库，每个文件夹中三个名称相同但后缀名不同的文件对应一个表，其中“.MYD”文件对应表的数据。MySQL数据库的所有账号密码就保存在“MySQL所在的文件夹\\data\\mysql\\user.MYD”中，需要MD5解密。</p>\n<p>root用户默认不支持外联，暴力破解时可以将爆破脚本上传到服务器，进行本地爆破。</p>\n<h2 id=\"0x04-Mysql-UDF提权\"><a href=\"#0x04-Mysql-UDF提权\" class=\"headerlink\" title=\"0x04 Mysql-UDF提权\"></a>0x04 Mysql-UDF提权</h2><p>###0x00 原理</p>\n<p>UDF（user definedfunction，用户定义函数），UDF的设计初衷是为了方便用户自定义一些函数，方便查询一些复杂的数据，同时也增加了使用UDF提权的可能。攻击者通过编写调用cmd或者shell的udf.dll文件，并且导入到一个指定的文件夹目录下，创建一个指向udf.dll的自定义函数，从而在数据库中的查询就等价于在cmd或者shell中执行命令。</p>\n<h3 id=\"0x01-版本差异\"><a href=\"#0x01-版本差异\" class=\"headerlink\" title=\"0x01 版本差异\"></a>0x01 版本差异</h3><p>不同的操作系统，不同的版本，提权时导出udf.dll存放的目录不一样。</p>\n<p>导出数据时根据MySQL版本选择不同的目录：<br>mysql&lt;5.1      导出目录c:&#x2F;windows或system32</p>\n<p>mysql&#x3D;&gt;5.1    导出安装目录&#x2F;lib&#x2F;plugin&#x2F; （其中plugin目录需要自行创建）</p>\n<h3 id=\"0x02-相关命令\"><a href=\"#0x02-相关命令\" class=\"headerlink\" title=\"0x02 相关命令\"></a>0x02 相关命令</h3><p>select version();         查看版本</p>\n<p>select @@basedir;    查看安装目录</p>\n<p>（一般通过脚本实现文件导入和命令执行）</p>\n<h3 id=\"0x03-提权\"><a href=\"#0x03-提权\" class=\"headerlink\" title=\"0x03 提权\"></a>0x03 提权</h3><p>首先是拿到了目标的webshll，获得的这个webshell权限很低。</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620202955967.png\" alt=\"image-20220620202955967\"></p>\n<h3 id=\"0x04\"><a href=\"#0x04\" class=\"headerlink\" title=\"0x04\"></a>0x04</h3><p>服务器是部署了mysql的，利用mysql提权，就需要找到mysql的账户和密码。</p>\n<p>首先找配置文件：</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620203254668.png\" alt=\"image-20220620203254668\"></p>\n<p>这里有个database.php，猜测是数据库配置文件，打开查看：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620203447146.png\" alt=\"image-20220620203447146\"></p>\n<p>得到数据库的账户密码。</p>\n<p>这里还可以通过查看<strong>数据库</strong>的<code>user.MYD</code>文件，里面存的是用户的密码的hash值，获取了以后可以通过cmd5或者其他途径进行解密。</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620214532653.png\" alt=\"image-20220620214532653\"></p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620204619373.png\" alt=\"image-20220620204619373\"></p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620204658157.png\" alt=\"image-20220620204658157\"></p>\n<p>将密码进行md5解密：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620204737752.png\" alt=\"image-20220620204737752\"></p>\n<h3 id=\"0x05\"><a href=\"#0x05\" class=\"headerlink\" title=\"0x05\"></a>0x05</h3><p>拿到数据库账号密码。开始对数据库连接：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620214620165.png\" alt=\"image-20220620214620165\"></p>\n<h3 id=\"0x06\"><a href=\"#0x06\" class=\"headerlink\" title=\"0x06\"></a>0x06</h3><p>查看mysql的安装路径（绝对路径）</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620214414946.png\" alt=\"image-20220620214414946\"></p>\n<h3 id=\"0x07\"><a href=\"#0x07\" class=\"headerlink\" title=\"0x07\"></a>0x07</h3><p>查看mysql的版本。发现是5.2版本，所以需要将dll文件放在lib\\plugin目录下才可以生效，如果是5.1以下，需要放到 C:\\Windows\\system32下</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620214701515.png\" alt=\"image-20220620214701515\"></p>\n<h3 id=\"0x08\"><a href=\"#0x08\" class=\"headerlink\" title=\"0x08\"></a>0x08</h3><p>找到lib目录：（如果没有lib目录需要手动创建）</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620214902877.png\" alt=\"image-20220620214902877\"></p>\n<p>使用命令创建路径：,执行命令后发现报的是失败，但是检查文件夹，确实已经创建。</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620214939729.png\" alt=\"image-20220620214939729\"></p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620214806178.png\" alt=\"image-20220620214806178\"></p>\n<h3 id=\"0x09\"><a href=\"#0x09\" class=\"headerlink\" title=\"0x09\"></a>0x09</h3><p>使用同样的方法创建plugin文件夹。</p>\n<p>使用直接导入的方式将udf.dll文件到指定位置。（udf.dll我以txt的形式放在附件）</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620215029496.png\" alt=\"image-20220620215029496\"></p>\n<h3 id=\"0x10\"><a href=\"#0x10\" class=\"headerlink\" title=\"0x10\"></a>0x10</h3><p>创建sys_eval函数，用于执行命令和回显：</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620215058541.png\" alt=\"image-20220620215058541\"></p>\n<h3 id=\"0x11\"><a href=\"#0x11\" class=\"headerlink\" title=\"0x11\"></a>0x11</h3><p>查看权限为系统权限：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620215149894.png\" alt=\"image-20220620215149894\"></p>\n<h2 id=\"0x05-Mysql-MOF提权\"><a href=\"#0x05-Mysql-MOF提权\" class=\"headerlink\" title=\"0x05 Mysql-MOF提权\"></a>0x05 Mysql-MOF提权</h2><h3 id=\"0x00-原理\"><a href=\"#0x00-原理\" class=\"headerlink\" title=\"0x00 原理\"></a>0x00 原理</h3><p>mof是windows系统的一个文件（在c:&#x2F;windows&#x2F;system32&#x2F;wbem&#x2F;mof&#x2F;nullevt.mof）叫做”托管对象格式”其作用是每隔五秒就会去监控进程创建和死亡。其就是用又了mysql的root权限了以后，然后使用root权限去执行我们上传的mof。隔了一定时间以后这个mof就会被执行，这个mof当中有一段是vbs脚本，这个vbs大多数的是cmd的添加管理员用户的命令。</p>\n<h3 id=\"0x01\"><a href=\"#0x01\" class=\"headerlink\" title=\"0x01\"></a>0x01</h3><p>参考文章：<br><a href=\"https://www.cnblogs.com/xishaonian/p/6384535.html\">https://www.cnblogs.com/xishaonian/p/6384535.html</a></p>\n<h2 id=\"0x06-Mssql提权\"><a href=\"#0x06-Mssql提权\" class=\"headerlink\" title=\"0x06 Mssql提权\"></a>0x06 Mssql提权</h2><h3 id=\"0x00-xp-cmdshell提权\"><a href=\"#0x00-xp-cmdshell提权\" class=\"headerlink\" title=\"0x00 xp_cmdshell提权\"></a>0x00 xp_cmdshell提权</h3><p>xp_cmdshell默认在 mssql2000中是开启的，在mssql2005之后的版本中则默认禁止（这里2008就是禁用的）。如果用户拥有管理员sa权限则可以用 sp_configure 重新开启它。</p>\n<h3 id=\"0x01-1\"><a href=\"#0x01-1\" class=\"headerlink\" title=\"0x01\"></a>0x01</h3><p>查找xp_cmdshell：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620220622945.png\" alt=\"image-20220620220622945\"></p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620220636731.png\" alt=\"image-20220620220636731\"></p>\n<h3 id=\"0x02\"><a href=\"#0x02\" class=\"headerlink\" title=\"0x02\"></a>0x02</h3><p>通过xp_cmdshell执行命令whoami: EXEC master.dbo.xp_cmdshell ‘命令’ </p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620220754397.png\" alt=\"image-20220620220754397\"></p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620220910597.png\" alt=\"image-20220620220910597\"></p>\n<p>这里被阻止执行了，原因是因为没有开启xp_cmdshell。</p>\n<h3 id=\"0x03\"><a href=\"#0x03\" class=\"headerlink\" title=\"0x03\"></a>0x03</h3><p>使用sp_configure开启xp_cmdshell（这里1就是开启，0是关闭）</p>\n<p>启用命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">EXEC sp_configure &#39;show advanced options&#39;,1;\n\nRECONFIGURE;\n\nEXEC sp_configure &#39;xp_cmdshell&#39;,1;\n\nRECONFIGURE;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620221054833.png\" alt=\"image-20220620221054833\"></p>\n<p>关闭命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">Exec sp_configure &#39;show advanced options&#39;,1 ；\n\nreconfigure;\n\nexec sp_configure &#39;xp_cmdshell&#39;,0;\n\nreconfigure;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h3 id=\"0x04-1\"><a href=\"#0x04-1\" class=\"headerlink\" title=\"0x04\"></a>0x04</h3><p>再次执行EXEC master.dbo.xp_cmdshell ‘命令’ ：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620221639979.png\" alt=\"image-20220620221639979\"></p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620221628741.png\" alt=\"image-20220620221628741\"></p>\n<p>成功提权。</p>\n<h3 id=\"0x05-使用-sp-oacreate进行提权\"><a href=\"#0x05-使用-sp-oacreate进行提权\" class=\"headerlink\" title=\"0x05  使用 sp_oacreate进行提权\"></a>0x05  使用 sp_oacreate进行提权</h3><p>主要是用来调用 OLE 对象，利用 OLE 对象的 run 方法执行系统命令。</p>\n<h3 id=\"0x06-1\"><a href=\"#0x06-1\" class=\"headerlink\" title=\"0x06\"></a>0x06</h3><p>执行命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">declare @shell int exec sp_oacreate &#39;wscript.shell&#39;,@shell output exec sp_oamethod\n@shell,&#39;run&#39;,null,&#39;c:\\windows\\system32\\cmd.exe &#x2F;c whoami &gt;c:\\\\1.txt&#39;\n调用cmd.exe执行whoami,并将结果输出为1.txt（便于查看回显结果）<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h3 id=\"0x07-1\"><a href=\"#0x07-1\" class=\"headerlink\" title=\"0x07\"></a>0x07</h3><p>同样，开启组件：</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620222008928.png\" alt=\"image-20220620222008928\"></p>\n<p>启动命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">EXEC sp_configure &#39;show advanced options&#39;, 1;\nRECONFIGURE WITH OVERRIDE;\nEXEC sp_configure &#39;Ole Automation Procedures&#39;, 1;\nRECONFIGURE WITH OVERRIDE;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>关闭命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">EXEC sp_configure &#39;show advanced options&#39;, 1;\nRECONFIGURE WITH OVERRIDE;\nEXEC sp_configure &#39;Ole Automation Procedures&#39;, 0;\nRECONFIGURE WITH OVERRIDE;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620222122439.png\" alt=\"image-20220620222122439\"></p>\n<h3 id=\"0x08-1\"><a href=\"#0x08-1\" class=\"headerlink\" title=\"0x08\"></a>0x08</h3><p>再次执行命令：<br><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220620222159666.png\" alt=\"image-20220620222159666\"></p>\n<p>没有生成1.txt文件；过程思路就是这样的。</p>\n<p>###0x09</p>\n<p><strong>SQL Server提权方法汇总</strong>：</p>\n<p><a href=\"https://blog.51cto.com/u_11797152/2411770\">https://blog.51cto.com/u_11797152/2411770</a></p>\n<h2 id=\"0x07-Oracle提权\"><a href=\"#0x07-Oracle提权\" class=\"headerlink\" title=\"0x07 Oracle提权\"></a>0x07 Oracle提权</h2><h3 id=\"0x00-1\"><a href=\"#0x00-1\" class=\"headerlink\" title=\"0x00\"></a>0x00</h3><p>Oracle数据库一般用于Java和jsp,如果jsp可以获取到后门的话，后门不需要提权，网站权限就是系统权限。</p>\n<h3 id=\"0x01-普通用户模式\"><a href=\"#0x01-普通用户模式\" class=\"headerlink\" title=\"0x01 普通用户模式\"></a>0x01 普通用户模式</h3><p>前提是拥有一个普通的Oracle连接账号。不需要DBA权限，可提权至DBA，并以Oracle实例运行的权限执行操作系统命令。</p>\n<h3 id=\"0x02-DBA用户模式\"><a href=\"#0x02-DBA用户模式\" class=\"headerlink\" title=\"0x02 DBA用户模式\"></a>0x02 DBA用户模式</h3><p>拥有DBA账号密码，可以省去自己手动创建存储过程的繁琐步骤，一键执行测试。（DBA账号是Oracle的最高权限） （使用自动化工具Oracleshellv1.0工具）</p>\n<p><img src=\"/post/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%831.htm/image-20220621084439714.png\" alt=\"image-20220621084439714\"></p>\n<h3 id=\"0x03-注入提升模式\"><a href=\"#0x03-注入提升模式\" class=\"headerlink\" title=\"0x03 注入提升模式\"></a>0x03 注入提升模式</h3><p>拥有一个Oracle注入点，可以通过注入点直接执行系统命令，此种模式没有实现回显，需要自己验证。（前提是要有注入点），再配合Oracleshell进行命令执行</p>\n<p>—SQLmap判断数据库是不是dba权限：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sqlmap.py -u http:&#x2F;&#x2F;192.168.131.142:8080&#x2F;sql.jsp?id-7698 --is-dba<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n","text":"0x00脑图： 0x01 数据库提权的意义及流程1、意义：在利用系统溢出漏洞无果的情况下，可以采用数据库进行提权；但需要知道数据库提权的前提条件：服务器开启数据库服务及获取到最高权限用户密码。除 Access 数据库外，其他数据库基本都存在数据库提权的可能。 2、流程 ：服务探针...","link":"","photos":[],"count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"categories":[{"name":"权限提升","slug":"权限提升","count":10,"path":"api/categories/权限提升.json"}],"tags":[{"name":"权限提升","slug":"权限提升","count":10,"path":"api/tags/权限提升.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x00\"><span class=\"toc-text\">0x00</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x01-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83%E7%9A%84%E6%84%8F%E4%B9%89%E5%8F%8A%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">0x01 数据库提权的意义及流程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x02-WEB%E6%88%96%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%8E%A2%E9%92%88%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8\"><span class=\"toc-text\">0x02 WEB或本地环境探针数据库应用</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x03-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83%E6%9D%83%E9%99%90%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%E6%94%B6%E9%9B%86%E7%AD%89%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">0x03 数据库提权权限用户密码收集等方法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x04-Mysql-UDF%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">0x04 Mysql-UDF提权</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x01-%E7%89%88%E6%9C%AC%E5%B7%AE%E5%BC%82\"><span class=\"toc-text\">0x01 版本差异</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x02-%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">0x02 相关命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x03-%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">0x03 提权</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x04\"><span class=\"toc-text\">0x04</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x05\"><span class=\"toc-text\">0x05</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x06\"><span class=\"toc-text\">0x06</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x07\"><span class=\"toc-text\">0x07</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x08\"><span class=\"toc-text\">0x08</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x09\"><span class=\"toc-text\">0x09</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x10\"><span class=\"toc-text\">0x10</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x11\"><span class=\"toc-text\">0x11</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x05-Mysql-MOF%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">0x05 Mysql-MOF提权</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x00-%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">0x00 原理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x01\"><span class=\"toc-text\">0x01</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x06-Mssql%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">0x06 Mssql提权</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x00-xp-cmdshell%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">0x00 xp_cmdshell提权</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x01-1\"><span class=\"toc-text\">0x01</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x02\"><span class=\"toc-text\">0x02</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x03\"><span class=\"toc-text\">0x03</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x04-1\"><span class=\"toc-text\">0x04</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x05-%E4%BD%BF%E7%94%A8-sp-oacreate%E8%BF%9B%E8%A1%8C%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">0x05  使用 sp_oacreate进行提权</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x06-1\"><span class=\"toc-text\">0x06</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x07-1\"><span class=\"toc-text\">0x07</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x08-1\"><span class=\"toc-text\">0x08</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x07-Oracle%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">0x07 Oracle提权</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x00-1\"><span class=\"toc-text\">0x00</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x01-%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">0x01 普通用户模式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x02-DBA%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">0x02 DBA用户模式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x03-%E6%B3%A8%E5%85%A5%E6%8F%90%E5%8D%87%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">0x03 注入提升模式</span></a></li></ol></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"权限提升-数据库提权2","uid":"2b9713aac0d7c052ca172c6738a7a353","slug":"权限提升-数据库提权2","date":"2022-06-21T00:31:26.000Z","updated":"2022-06-21T15:02:52.187Z","comments":true,"path":"api/articles/权限提升-数据库提权2.json","keywords":null,"cover":[],"text":"0x00脑图： 0x01 Redis数据库提权0x00 redis介绍Redis是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。从2010年3月15日起，Redis的开发工作由VMware主持。从20...","link":"","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[{"name":"权限提升","slug":"权限提升","count":10,"path":"api/categories/权限提升.json"}],"tags":[{"name":"权限提升","slug":"权限提升","count":10,"path":"api/tags/权限提升.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"权限提升-windows提权","uid":"e38c975ecb9beb0ae47fa044c10774fe","slug":"权限提升-windows提权","date":"2022-06-19T14:00:54.000Z","updated":"2022-06-20T02:03:43.786Z","comments":true,"path":"api/articles/权限提升-windows提权.json","keywords":null,"cover":[],"text":"0x00脑图： 0x01 windows权限划分0x00 普通权限 1、默认情况下，系统为用户分了7个组，并给每个组赋予不同的操作权限，管理员组(Administrators)、高权限用户组(PowerUsers)、普通用户组(Users)、备份操作组(Backup Operat...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"权限提升","slug":"权限提升","count":10,"path":"api/categories/权限提升.json"}],"tags":[{"name":"权限提升","slug":"权限提升","count":10,"path":"api/tags/权限提升.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}